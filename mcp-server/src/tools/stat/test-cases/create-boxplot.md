# 盒鬚圖創建工具測試案例

## 工具概述

盒鬚圖（箱線圖）是用於顯示數據分佈的統計圖表，能夠同時展現數據的中位數、四分位數、變異程度和異常值，特別適合用於多組數據的比較分析。

## 統計專業情境

### 情境 1: 多中心臨床試驗藥物療效比較

**研究背景**: 比較四個醫學中心使用同一藥物的治療效果差異
**研究目的**: 評估治療效果的一致性，識別中心間差異
**統計意義**: 多組比較、異常值檢測、效果量評估

**測試數據**:

```json
{
  "groups": [
    [
      12.5, 15.2, 13.8, 18.1, 14.7, 16.3, 13.1, 17.9, 15.6, 14.2, 16.8, 13.5,
      17.4, 14.9
    ],
    [
      18.2, 21.7, 19.5, 24.3, 20.1, 22.8, 18.9, 23.6, 21.2, 19.8, 22.4, 19.1,
      23.9, 20.7
    ],
    [
      14.8, 17.3, 15.9, 19.6, 16.5, 18.2, 15.1, 19.8, 17.7, 16.2, 18.9, 15.4,
      19.1, 17.0
    ],
    [
      21.3, 24.8, 22.6, 27.1, 23.2, 25.9, 21.7, 26.4, 24.1, 22.9, 25.5, 22.2,
      26.8, 23.7
    ]
  ],
  "group_labels": ["中心A", "中心B", "中心C", "中心D"],
  "title": "多中心臨床試驗藥物療效比較",
  "y_axis_label": "療效改善分數",
  "generate_image": true,
  "context": {
    "scenario": "medical",
    "variable_name": "藥物療效分數",
    "comparison_type": "多中心比較",
    "analysis_purpose": "療效一致性與中心差異評估"
  }
}
```

### 情境 2: 教育介入效果多組比較

**研究背景**: 比較三種不同教學方法對學習成效的影響
**研究目的**: 評估教學方法的相對效果，選擇最佳方法
**統計意義**: 組間效應、變異性比較、假設檢定前置分析

**測試數據**:

```json
{
  "groups": [
    [72, 78, 74, 85, 76, 81, 73, 84, 79, 75, 82, 77, 83, 78, 80, 74, 86, 75],
    [85, 91, 87, 94, 89, 92, 86, 95, 90, 88, 93, 87, 96, 89, 91, 85, 97, 88],
    [68, 74, 70, 79, 72, 77, 69, 80, 75, 71, 78, 73, 81, 74, 76, 70, 82, 73]
  ],
  "group_labels": ["傳統講授", "互動討論", "實作體驗"],
  "title": "不同教學方法學習成效比較",
  "y_axis_label": "學習成效分數",
  "generate_image": true,
  "context": {
    "scenario": "education",
    "variable_name": "學習成效評分",
    "comparison_type": "教學方法比較",
    "analysis_purpose": "教學效果評估與方法選擇"
  }
}
```

### 情境 3: 品質管制供應商比較

**研究背景**: 比較五個供應商的產品品質穩定性
**研究目的**: 評估供應商品質一致性，篩選優質供應商
**統計意義**: 製程變異性分析、異常批次識別

**測試數據**:

```json
{
  "groups": [
    [98.2, 99.1, 98.7, 99.8, 98.9, 99.4, 98.5, 99.6, 99.0, 98.8, 99.3, 98.6],
    [97.8, 98.9, 98.1, 99.2, 98.4, 99.0, 97.9, 99.3, 98.7, 98.2, 99.1, 98.5],
    [99.1, 99.7, 99.3, 99.9, 99.5, 99.8, 99.2, 100.1, 99.6, 99.4, 99.8, 99.3],
    [96.5, 97.8, 97.1, 98.2, 97.4, 98.0, 96.8, 98.4, 97.7, 97.2, 98.1, 97.5],
    [
      99.5, 100.2, 99.8, 100.5, 100.0, 100.3, 99.7, 100.6, 100.1, 99.9, 100.4,
      99.8
    ]
  ],
  "group_labels": ["供應商A", "供應商B", "供應商C", "供應商D", "供應商E"],
  "title": "供應商產品品質比較分析",
  "y_axis_label": "品質指標",
  "generate_image": true,
  "context": {
    "scenario": "quality",
    "variable_name": "產品品質指標",
    "comparison_type": "供應商品質比較",
    "analysis_purpose": "品質穩定性與供應商評估"
  }
}
```

### 情境 4: 軟板製造良率分析 - 生產線比較

**研究背景**: 比較四條軟板生產線的良率表現差異
**研究目的**: 識別表現最佳的生產線，分析製程穩定性
**統計意義**: 製程能力評估、良率變異性分析、生產線效能比較

**測試數據**:

```json
{
  "groups": [
    [
      94.2, 95.8, 94.7, 96.3, 95.1, 95.9, 94.5, 96.1, 95.4, 94.8, 95.7, 94.9,
      96.0, 95.2
    ],
    [
      92.1, 93.7, 92.6, 94.2, 93.0, 93.8, 92.4, 94.0, 93.3, 92.7, 93.6, 92.8,
      93.9, 93.1
    ],
    [
      96.8, 97.4, 96.2, 98.1, 97.0, 97.6, 96.5, 97.9, 97.3, 96.9, 97.5, 96.7,
      97.8, 97.1
    ],
    [
      89.5, 91.2, 90.1, 92.8, 90.7, 91.9, 89.8, 92.4, 91.5, 90.3, 91.7, 90.6,
      92.1, 90.9
    ]
  ],
  "group_labels": ["生產線A", "生產線B", "生產線C", "生產線D"],
  "title": "四條軟板生產線良率比較分析",
  "y_axis_label": "良率 (%)",
  "generate_image": true,
  "context": {
    "scenario": "manufacturing",
    "variable_name": "軟板製造良率",
    "comparison_type": "生產線良率比較",
    "analysis_purpose": "製程能力評估與生產線效能分析",
    "industry": "軟板製造業"
  }
}
```

### 情境 5: 軟板製造良率分析 - 不同工藝段良率

**研究背景**: 比較軟板製造過程中五個關鍵工藝段的良率表現
**研究目的**: 識別製程瓶頸，優化工藝流程
**統計意義**: 工藝段良率分析、製程瓶頸識別、品質改善重點

**測試數據**:

```json
{
  "groups": [
    [
      98.5, 99.1, 98.8, 99.4, 98.9, 99.2, 98.7, 99.3, 99.0, 98.6, 99.1, 98.8,
      99.0, 98.9
    ],
    [
      95.2, 96.8, 95.7, 97.3, 96.1, 96.9, 95.5, 97.1, 96.4, 95.8, 96.7, 96.0,
      96.8, 96.2
    ],
    [
      91.8, 93.5, 92.3, 94.1, 92.7, 93.8, 92.1, 93.9, 93.2, 92.5, 93.6, 92.4,
      93.7, 92.9
    ],
    [
      97.1, 98.2, 97.6, 98.7, 97.9, 98.4, 97.4, 98.6, 98.1, 97.7, 98.3, 97.8,
      98.5, 98.0
    ],
    [
      88.6, 90.2, 89.1, 91.5, 89.7, 90.8, 88.9, 91.1, 90.4, 89.3, 90.6, 89.5,
      90.9, 89.8
    ]
  ],
  "group_labels": ["基材處理", "圖形轉移", "蝕刻製程", "表面處理", "最終檢測"],
  "title": "軟板製造工藝段良率分析",
  "y_axis_label": "工藝段良率 (%)",
  "generate_image": true,
  "context": {
    "scenario": "manufacturing",
    "variable_name": "工藝段良率",
    "comparison_type": "製程工藝段比較",
    "analysis_purpose": "工藝流程優化與瓶頸識別",
    "industry": "軟板製造業",
    "process_focus": "製程瓶頸分析"
  }
}
```

## 一般用戶情境

### 情境 1: 四家分店銷售業績比較

**生活情境**: 連鎖店老闆想比較四家分店的月銷售業績表現
**數據**: 四家分店過去12個月的月銷售額
**目的**: 了解各分店業績水準和穩定性，制定經營策略

**測試數據**:

```json
{
  "groups": [
    [280, 295, 275, 312, 288, 305, 278, 318, 292, 285, 308, 282],
    [320, 335, 315, 352, 328, 345, 318, 358, 332, 325, 348, 322],
    [250, 265, 245, 282, 258, 275, 248, 288, 262, 255, 278, 252],
    [380, 395, 375, 412, 388, 405, 378, 418, 392, 385, 408, 382]
  ],
  "group_labels": ["信義店", "西門店", "士林店", "天母店"],
  "title": "四家分店月銷售業績比較",
  "y_axis_label": "月銷售額 (萬元)",
  "generate_image": true,
  "context": {
    "scenario": "general",
    "variable_name": "月銷售額",
    "comparison_type": "分店業績比較",
    "analysis_purpose": "業績水準與穩定性分析"
  }
}
```

### 情境 2: 三班學生考試成績比較

**生活情境**: 學校想比較三個班級的數學考試成績分佈
**數據**: 三個班級學生的數學考試成績
**目的**: 了解各班學習狀況，調整教學策略

**測試數據**:

```json
{
  "groups": [
    [78, 85, 72, 91, 79, 86, 74, 89, 82, 77, 88, 75, 90, 81, 84, 76, 92, 80],
    [82, 89, 76, 95, 83, 90, 78, 93, 86, 81, 92, 79, 94, 85, 88, 80, 96, 84],
    [68, 75, 62, 81, 69, 76, 64, 79, 72, 67, 78, 65, 80, 71, 74, 66, 82, 70]
  ],
  "group_labels": ["三年甲班", "三年乙班", "三年丙班"],
  "title": "三班數學考試成績比較",
  "y_axis_label": "數學成績",
  "generate_image": true,
  "context": {
    "scenario": "education",
    "variable_name": "數學考試成績",
    "comparison_type": "班級成績比較",
    "analysis_purpose": "學習成效評估與教學調整"
  }
}
```

### 情境 3: 不同品牌手機電池續航比較

**生活情境**: 消費者想比較四個手機品牌的電池續航表現
**數據**: 各品牌手機電池使用時間測試結果
**目的**: 了解各品牌電池性能，作為購買參考

**測試數據**:

```json
{
  "groups": [
    [18.5, 20.2, 19.1, 21.8, 19.7, 20.9, 18.8, 21.3, 20.4, 19.3, 21.1, 19.6],
    [22.1, 24.3, 22.8, 25.7, 23.4, 24.9, 22.5, 25.2, 23.8, 22.9, 24.6, 23.1],
    [16.8, 18.5, 17.2, 19.9, 17.8, 18.9, 17.1, 19.3, 18.4, 17.5, 19.1, 17.9],
    [20.3, 22.7, 21.1, 24.2, 21.8, 23.4, 20.7, 23.9, 22.5, 21.4, 23.1, 21.9]
  ],
  "group_labels": ["品牌A", "品牌B", "品牌C", "品牌D"],
  "title": "四大品牌手機電池續航比較",
  "y_axis_label": "電池續航時間 (小時)",
  "generate_image": true,
  "context": {
    "scenario": "general",
    "variable_name": "電池續航時間",
    "comparison_type": "品牌性能比較",
    "analysis_purpose": "消費選擇參考與性能評估"
  }
}
```

## 特殊情境

### 情境 4: 含異常值的薪資比較

**研究背景**: 比較三個部門薪資分佈，包含異常高薪
**特點**: 數據中包含明顯的異常值（高階主管薪資）

**測試數據**:

```json
{
  "groups": [
    [35000, 38000, 42000, 36000, 41000, 39000, 43000, 37000, 40000, 120000],
    [45000, 48000, 52000, 46000, 51000, 49000, 53000, 47000, 50000, 48000],
    [55000, 58000, 62000, 56000, 61000, 59000, 63000, 57000, 60000, 150000]
  ],
  "group_labels": ["行政部", "業務部", "技術部"],
  "title": "部門薪資分佈比較（含異常值）",
  "y_axis_label": "月薪 (元)",
  "generate_image": true,
  "context": {
    "scenario": "general",
    "variable_name": "員工月薪",
    "comparison_type": "部門薪資比較",
    "analysis_purpose": "薪資結構分析與異常值識別",
    "special_note": "包含高階主管異常薪資"
  }
}
```

### 情境 5: 不等樣本大小的滿意度比較

**研究背景**: 比較不同規模部門的員工滿意度
**特點**: 各組樣本數量不相等

**測試數據**:

```json
{
  "groups": [
    [6.2, 7.1, 6.8, 7.5, 6.9, 7.3, 6.5, 7.8, 7.0, 6.7, 7.4, 6.8, 7.2, 6.9, 7.6],
    [7.8, 8.1, 7.5, 8.4, 7.9, 8.2, 7.6, 8.5, 8.0, 7.7],
    [
      5.2, 5.8, 5.5, 6.1, 5.7, 5.9, 5.3, 6.2, 5.6, 5.4, 6.0, 5.5, 5.8, 5.3, 6.1,
      5.7, 5.9
    ],
    [8.5, 8.8, 8.2, 9.1, 8.7, 8.9, 8.3, 9.2, 8.6, 8.4, 9.0, 8.5]
  ],
  "group_labels": [
    "生產部 (n=15)",
    "研發部 (n=10)",
    "客服部 (n=17)",
    "主管層 (n=12)"
  ],
  "title": "各部門員工滿意度比較",
  "y_axis_label": "滿意度評分 (1-10)",
  "generate_image": true,
  "context": {
    "scenario": "general",
    "variable_name": "員工滿意度",
    "comparison_type": "部門滿意度比較",
    "analysis_purpose": "組織氣候評估",
    "special_note": "樣本大小不等"
  }
}
```

### 情境 6: 時間序列多階段比較

**研究背景**: 比較產品在四個發展階段的性能表現
**特點**: 展現時間發展趨勢

**測試數據**:

```json
{
  "groups": [
    [45, 48, 42, 51, 46, 49, 43, 50, 47, 44, 52, 45],
    [58, 61, 55, 64, 59, 62, 56, 63, 60, 57, 65, 58],
    [72, 75, 69, 78, 73, 76, 70, 77, 74, 71, 79, 72],
    [85, 88, 82, 91, 86, 89, 83, 90, 87, 84, 92, 85]
  ],
  "group_labels": ["第一階段", "第二階段", "第三階段", "第四階段"],
  "title": "產品性能發展階段比較",
  "y_axis_label": "性能指標",
  "generate_image": true,
  "context": {
    "scenario": "general",
    "variable_name": "產品性能指標",
    "comparison_type": "發展階段比較",
    "analysis_purpose": "改進效果追蹤",
    "special_note": "時間序列發展"
  }
}
```

## 預期結果

### 統計專業用戶期望看到：

- 詳細的五數摘要（最小值、Q1、中位數、Q3、最大值）
- 四分位距（IQR）計算
- 異常值識別與標註
- 各組變異性比較
- 分佈偏態指示
- 組間差異統計檢定建議
- 效果量估計

### 一般用戶期望看到：

- 清晰的視覺化比較圖
- 各組表現排名
- 異常值的解釋說明
- 組間差異的生活化描述
- 實用的比較結論
- 改善建議

## 測試指令範例

```bash
# 基本盒鬚圖
curl -X POST http://localhost:3000/tools/stat/create-boxplot \
  -H "Content-Type: application/json" \
  -d '{
    "groups": [[12.5,15.2,13.8],[18.2,21.7,19.5]],
    "group_labels": ["組A","組B"],
    "title": "兩組比較"
  }'

# 含圖片生成的盒鬚圖
curl -X POST http://localhost:3000/tools/stat/create-boxplot \
  -H "Content-Type: application/json" \
  -d '{
    "groups": [[280,295,275],[320,335,315],[250,265,245]],
    "group_labels": ["店A","店B","店C"],
    "title": "分店業績比較",
    "generate_image": true
  }'
```

## AI 提問範例

### 範例 1: 多組數據比較

**用戶提問**: "我有三個班級的數學考試成績，想比較它們的表現差異。A班: [75, 82, 78, 85, 79, 81, 77, 84]，B班: [68, 74, 71, 77, 73, 75, 69, 76]，C班: [88, 92, 89, 95, 91, 93, 87, 94]。能幫我畫盒鬚圖比較嗎？"

**AI 回應**: 盒鬚圖是比較多組數據的最佳視覺化工具，能清楚顯示各班的中位數、四分位數範圍和異常值。這將幫助您直觀地比較三個班級的成績分佈。

**工具調用**:

```json
{
  "tool": "create_boxplot",
  "groups": [
    [75, 82, 78, 85, 79, 81, 77, 84],
    [68, 74, 71, 77, 73, 75, 69, 76],
    [88, 92, 89, 95, 91, 93, 87, 94]
  ],
  "group_labels": ["A班", "B班", "C班"],
  "title": "三個班級數學考試成績比較",
  "y_axis_label": "考試成績",
  "generate_image": true,
  "image_format": "png"
}
```

### 範例 2: 治療效果可視化

**用戶提問**: "我在研究兩種治療方法的效果，想用盒鬚圖展示結果。治療A的改善分數: [15, 18, 22, 16, 19, 17, 21, 14, 20, 18]，治療B的改善分數: [25, 28, 24, 29, 26, 30, 23, 27, 25, 28]。"

**AI 回應**: 盒鬚圖能完美展示兩種治療方法的效果差異，包括中位數、變異性和可能的異常值，這對醫療研究報告很有價值。

**工具調用**:

```json
{
  "tool": "create_boxplot",
  "groups": [
    [15, 18, 22, 16, 19, 17, 21, 14, 20, 18],
    [25, 28, 24, 29, 26, 30, 23, 27, 25, 28]
  ],
  "group_labels": ["治療方法A", "治療方法B"],
  "title": "兩種治療方法效果比較",
  "y_axis_label": "改善分數",
  "generate_image": true,
  "image_format": "png",
  "figsize": [8, 6],
  "dpi": 300
}
```

### 範例 3: 軟板製造良率比較 - 白話提問

**用戶提問**: "我們廠有三條生產線在做軟板，最近老闆要我看看哪條線的良率比較好。我收集了這三條線上個月的良率數據，想要用圖表來比較一下，看看哪條線比較穩定。

第一條線的良率: 94.2, 95.8, 94.7, 96.3, 95.1, 95.9, 94.5, 96.1, 95.4, 94.8, 95.7, 94.9
第二條線的良率: 92.1, 93.7, 92.6, 94.2, 93.0, 93.8, 92.4, 94.0, 93.3, 92.7, 93.6, 92.8  
第三條線的良率: 96.8, 97.4, 96.2, 98.1, 97.0, 97.6, 96.5, 97.9, 97.3, 96.9, 97.5, 96.7

有什麼方法可以一目了然地看出差異嗎？"

**AI 回應**: 盒鬚圖最適合這種情況！它能清楚顯示每條生產線的良率分布情況，包括平均水準、穩定性，還能看出有沒有異常的數據點。這樣您就能輕鬆向老闆報告哪條線表現最好、最穩定。

**工具調用**:

```json
{
  "tool": "create_boxplot",
  "groups": [
    [94.2, 95.8, 94.7, 96.3, 95.1, 95.9, 94.5, 96.1, 95.4, 94.8, 95.7, 94.9],
    [92.1, 93.7, 92.6, 94.2, 93.0, 93.8, 92.4, 94.0, 93.3, 92.7, 93.6, 92.8],
    [96.8, 97.4, 96.2, 98.1, 97.0, 97.6, 96.5, 97.9, 97.3, 96.9, 97.5, 96.7]
  ],
  "group_labels": ["第一條線", "第二條線", "第三條線"],
  "title": "三條軟板生產線良率比較",
  "y_axis_label": "良率 (%)",
  "generate_image": true,
  "image_format": "png"
}
```

### 範例 4: 軟板工藝流程分析 - 白話提問

**用戶提問**: "我們軟板生產有好幾個步驟，從基材開始到最後檢驗出貨，我想知道哪個步驟最容易出問題，因為最近有客戶反應品質不太穩定。
**問題範例1**: "我們軟板生產有好幾個步驟...能幫我畫一個盒鬚圖來比較這些數據，找出哪個步驟需要改善嗎？"
**問題範例2**:"我們軟板生產有好幾個步驟...能幫我製作一個視覺化圖表來分析這些數據，這樣比較容易看出哪個步驟
有問題？"
我統計了各個步驟最近的合格率：

- 基材處理: 98.5, 99.1, 98.8, 99.4, 98.9, 99.2, 98.7, 99.3, 99.0, 98.6
- 電路印刷: 95.2, 96.8, 95.7, 97.3, 96.1, 96.9, 95.5, 97.1, 96.4, 95.8
- 蝕刻加工: 91.8, 93.5, 92.3, 94.1, 92.7, 93.8, 92.1, 93.9, 93.2, 92.5
- 表面處理: 97.1, 98.2, 97.6, 98.7, 97.9, 98.4, 97.4, 98.6, 98.1, 97.7
- 最終檢驗: 88.6, 90.2, 89.1, 91.5, 89.7, 90.8, 88.9, 91.1, 90.4, 89.3

能幫我看看這些數據，找出哪個步驟需要改善嗎？"

**AI 回應**: 當然可以！用盒鬚圖來比較各個工藝步驟的合格率分布，能一眼看出哪個步驟的表現較差、波動較大。這樣您就能針對問題步驟重點改善，提升整體品質穩定性。

### 範例 5: 軟板工藝流程分析 - 白話提問

我們軟板生產有好幾個步驟，從基材開始到最後檢驗出貨，我想知道哪個步驟最容易出問題。

我統計了各個步驟最近的合格率：

- 基材處理: 98.5, 99.1, 98.8, 99.4, 98.9, 99.2, 98.7, 99.3, 99.0, 98.6
- 電路印刷: 95.2, 96.8, 95.7, 97.3, 96.1, 96.9, 95.5, 97.1, 96.4, 95.8
- 蝕刻加工: 91.8, 93.5, 92.3, 94.1, 92.7, 93.8, 92.1, 93.9, 93.2, 92.5
- 表面處理: 97.1, 98.2, 97.6, 98.7, 97.9, 98.4, 97.4, 98.6, 98.1, 97.7
- 最終檢驗: 88.6, 90.2, 89.1, 91.5, 89.7, 90.8, 88.9, 91.1, 90.4, 89.3

請幫我製作一個盒鬚圖來視覺化比較這些數據，這樣我可以清楚看出哪個步驟需要改善。

**工具調用**:

```json
{
  "tool": "create_boxplot",
  "groups": [
    [98.5, 99.1, 98.8, 99.4, 98.9, 99.2, 98.7, 99.3, 99.0, 98.6],
    [95.2, 96.8, 95.7, 97.3, 96.1, 96.9, 95.5, 97.1, 96.4, 95.8],
    [91.8, 93.5, 92.3, 94.1, 92.7, 93.8, 92.1, 93.9, 93.2, 92.5],
    [97.1, 98.2, 97.6, 98.7, 97.9, 98.4, 97.4, 98.6, 98.1, 97.7],
    [88.6, 90.2, 89.1, 91.5, 89.7, 90.8, 88.9, 91.1, 90.4, 89.3]
  ],
  "group_labels": ["基材處理", "電路印刷", "蝕刻加工", "表面處理", "最終檢驗"],
  "title": "軟板製造各工藝步驟合格率比較",
  "y_axis_label": "合格率 (%)",
  "generate_image": true,
  "image_format": "png"
}
```

## 分析重點

### 盒鬚圖組件解讀：

- **箱子**: 代表中間50%的數據（Q1到Q3）
- **中位線**: 箱子內的線代表中位數
- **鬚線**: 延伸到非異常值的最大最小值
- **異常值**: 超出1.5倍IQR的點
- **箱高**: 反映數據變異程度

### 比較分析要點：

- **中位數比較**: 各組中心趨勢
- **箱高比較**: 各組變異性
- **異常值模式**: 特殊值分佈
- **分佈對稱性**: 中位線在箱中的位置
- **重疊程度**: 各組分佈的重疊情況

### 實務應用建議：

- 多組比較的視覺化首選
- 異常值檢測的有效工具
- 非參數統計的前置分析
- 數據品質評估
- 決策支援的直觀展示
