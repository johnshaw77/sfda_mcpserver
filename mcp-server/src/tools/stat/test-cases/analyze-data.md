# 資料分析工具測試案例

## 工具概述
資料分析工具提供全面的描述性統計分析，包括中心趨勢、變異性、分佈形狀和資料品質評估，是進行深入統計分析前的重要步驟。

## 統計專業情境

### 情境 1: 臨床試驗基線特徵分析
**研究背景**: 分析臨床試驗受試者的基線生理指標
**研究目的**: 評估樣本代表性，確保試驗設計適當
**統計意義**: 描述性統計、常態性檢驗、資料品質評估

**測試數據**:
```json
{
  "data": [
    28.5, 31.2, 29.8, 33.1, 30.7, 32.4, 28.9, 34.2, 31.5, 29.3,
    33.8, 30.1, 32.7, 29.6, 34.5, 31.9, 28.4, 33.3, 30.8, 32.1,
    29.2, 34.8, 31.4, 30.5, 33.6, 29.9, 32.8, 31.1, 34.1, 30.3
  ],
  "variable_name": "受試者BMI指標",
  "alpha": 0.05,
  "context": {
    "scenario": "medical",
    "variable_type": "生理指標",
    "analysis_purpose": "基線特徵描述與樣本代表性評估",
    "target_population": "18-65歲成年人"
  }
}
```

### 情境 2: 教育評估標準化分數分析
**研究背景**: 分析大型標準化測驗的分數分佈特性
**研究目的**: 驗證測驗品質，建立常模參考
**統計意義**: 分佈檢驗、標準化參數、測驗信效度評估

**測試數據**:
```json
{
  "data": [
    485, 512, 498, 523, 507, 491, 518, 503, 489, 525, 510, 496, 521, 506, 492,
    519, 504, 488, 526, 511, 497, 522, 508, 494, 517, 502, 490, 524, 509, 495,
    520, 505, 487, 527, 512, 498, 523, 507, 493, 516, 501, 489, 525, 510, 496,
    521, 506, 492, 518, 503, 485, 528, 513, 499, 522, 508, 494, 517, 502, 490
  ],
  "variable_name": "標準化測驗分數",
  "alpha": 0.05,
  "context": {
    "scenario": "education",
    "variable_type": "測驗分數",
    "analysis_purpose": "測驗品質評估與常模建立",
    "expected_distribution": "常態分佈 (μ=500, σ=100)"
  }
}
```

### 情境 3: 製程品質統計分析
**研究背景**: 分析製程產出的品質指標資料
**研究目的**: 評估製程穩定性與品質控制狀況
**統計意義**: 製程能力分析、控制界限設定、變異源識別

**測試數據**:
```json
{
  "data": [
    99.82, 100.15, 99.91, 100.28, 99.77, 100.31, 99.85, 100.19, 99.93, 100.07,
    99.88, 100.24, 99.76, 100.33, 99.89, 100.11, 99.94, 100.06, 99.87, 100.22,
    99.79, 100.29, 99.92, 100.08, 99.86, 100.25, 99.78, 100.32, 99.90, 100.13,
    99.84, 100.17, 99.95, 100.05, 99.83, 100.26, 99.81, 100.30, 99.96, 100.04
  ],
  "variable_name": "產品重量 (g)",
  "alpha": 0.05,
  "context": {
    "scenario": "quality",
    "variable_type": "品質指標",
    "analysis_purpose": "製程能力評估與品質控制",
    "specification_limits": "99.5-100.5g",
    "target_value": "100.0g"
  }
}
```

## 一般用戶情境

### 情境 1: 員工薪資結構分析
**生活情境**: 人資部門想分析公司薪資分佈是否合理
**數據**: 全公司員工薪資資料（已去識別化）
**目的**: 了解薪資結構，評估薪資政策合理性

**測試數據**:
```json
{
  "data": [
    35000, 38000, 42000, 36000, 45000, 39000, 48000, 41000, 52000, 37000,
    55000, 43000, 58000, 40000, 61000, 44000, 47000, 38000, 49000, 42000,
    51000, 46000, 54000, 39000, 56000, 41000, 59000, 45000, 62000, 48000,
    65000, 43000, 57000, 40000, 60000, 44000, 53000, 47000, 50000, 41000
  ],
  "variable_name": "員工月薪",
  "alpha": 0.05,
  "context": {
    "scenario": "general",
    "variable_type": "薪資數據",
    "analysis_purpose": "薪資結構合理性分析",
    "company_info": "中型科技公司，200人規模"
  }
}
```

### 情境 2: 咖啡店營業額分析
**生活情況**: 咖啡店老闆想了解三個月來的營業額變化
**數據**: 每日營業額記錄
**目的**: 評估營業狀況，制定經營策略

**測試數據**:
```json
{
  "data": [
    12500, 15800, 13200, 18900, 14700, 16400, 12800, 17200, 13900, 15600,
    11900, 19200, 14200, 16800, 13500, 17800, 15100, 16200, 12300, 18500,
    13800, 15900, 14500, 17500, 12700, 18100, 14000, 16600, 13100, 17900,
    15400, 16100, 12600, 18700, 14300, 16900, 13400, 17300, 15200, 16500,
    12100, 19000, 14600, 17100, 13700, 16300, 15500, 17700, 12900, 18300
  ],
  "variable_name": "每日營業額",
  "alpha": 0.05,
  "context": {
    "scenario": "general",
    "variable_type": "營業數據",
    "analysis_purpose": "營業狀況評估與策略制定",
    "business_info": "市區咖啡店，營業90天數據"
  }
}
```

### 情境 3: 學生考試成績分析
**生活情境**: 老師想分析班上數學考試的整體表現
**數據**: 全班學生的數學考試成績
**目的**: 了解教學效果，調整教學方法

**測試數據**:
```json
{
  "data": [
    78, 85, 72, 91, 79, 86, 74, 89, 82, 77, 88, 75, 90, 81, 84,
    76, 92, 80, 87, 73, 93, 83, 78, 94, 85, 79, 88, 76, 91, 82,
    86, 74, 89, 81, 95, 77, 90, 83, 87, 75, 92, 80, 85, 78, 93
  ],
  "variable_name": "數學考試成績",
  "alpha": 0.05,
  "context": {
    "scenario": "education",
    "variable_type": "考試成績",
    "analysis_purpose": "教學效果評估與方法調整",
    "class_info": "高二數學班，45位學生"
  }
}
```

## 特殊分佈情境

### 情境 4: 右偏分佈 - 網站停留時間
**研究背景**: 分析網站用戶停留時間，典型右偏分佈
**特點**: 大多數用戶停留時間短，少數停留很久

**測試數據**:
```json
{
  "data": [
    15, 23, 18, 45, 21, 32, 19, 67, 25, 38, 16, 89, 27, 41, 20,
    125, 29, 35, 22, 156, 31, 43, 24, 178, 33, 47, 26, 198, 36,
    52, 28, 234, 39, 48, 30, 267, 42, 55, 34, 298, 44, 58, 37
  ],
  "variable_name": "網站停留時間 (秒)",
  "alpha": 0.05,
  "context": {
    "scenario": "general",
    "variable_type": "行為數據",
    "analysis_purpose": "用戶行為模式分析",
    "distribution_note": "典型右偏分佈，存在長尾效應"
  }
}
```

### 情境 5: 含異常值的銷售數據
**研究背景**: 月銷售額包含促銷月份的異常高值
**特點**: 包含明顯異常值

**測試數據**:
```json
{
  "data": [
    280, 295, 275, 312, 288, 305, 278, 318, 292, 285,
    308, 282, 520, 298, 315, 289, 325, 295, 302, 287
  ],
  "variable_name": "月銷售額 (萬元)",
  "alpha": 0.05,
  "context": {
    "scenario": "general",
    "variable_type": "銷售數據",
    "analysis_purpose": "銷售模式分析與異常值檢測",
    "outlier_note": "第13個月為大型促銷活動月份"
  }
}
```

### 情境 6: 雙峰分佈 - 混合客群數據
**研究背景**: 客戶年齡分佈呈現雙峰模式
**特點**: 兩個明顯的客群

**測試數據**:
```json
{
  "data": [
    22, 24, 26, 23, 25, 27, 24, 28, 25, 26, 23, 29, 24, 27, 25,
    45, 47, 49, 46, 48, 50, 47, 51, 48, 49, 46, 52, 47, 50, 48,
    24, 26, 28, 25, 27, 29, 26, 30, 27, 28, 25, 31, 26, 29, 27
  ],
  "variable_name": "客戶年齡",
  "alpha": 0.05,
  "context": {
    "scenario": "general",
    "variable_type": "人口統計數據",
    "analysis_purpose": "客群分析與市場區隔",
    "distribution_note": "雙峰分佈：年輕客群 + 中年客群"
  }
}
```

## 小樣本情境

### 情境 7: 小樣本產品測試
**研究背景**: 新產品小批量測試結果
**特點**: 樣本數較小，需要審慎解釋

**測試數據**:
```json
{
  "data": [
    8.5, 9.2, 8.8, 9.5, 8.7, 9.1, 8.9, 9.3, 8.6, 9.0
  ],
  "variable_name": "產品評分 (1-10)",
  "alpha": 0.05,
  "context": {
    "scenario": "quality",
    "variable_type": "評分數據",
    "analysis_purpose": "新產品測試評估",
    "sample_note": "小樣本 (n=10)，結果需謹慎解釋"
  }
}
```

### 情境 8: 極值數據分析
**研究背景**: 包含極端值的環境監測數據
**特點**: 數據範圍大，變異性高

**測試數據**:
```json
{
  "data": [
    0.5, 2.3, 1.8, 15.2, 3.1, 4.7, 2.9, 18.9, 5.4, 3.8,
    1.2, 22.1, 4.5, 6.2, 3.3, 25.7, 5.8, 4.1, 2.7, 19.8
  ],
  "variable_name": "空氣污染指數",
  "alpha": 0.05,
  "context": {
    "scenario": "general",
    "variable_type": "環境數據",
    "analysis_purpose": "空氣品質監測分析",
    "extreme_note": "包含污染事件的極端數值"
  }
}
```

## 預期結果

### 統計專業用戶期望看到：
- 完整的描述性統計（平均數、中位數、眾數、標準差、變異數）
- 分佈形狀指標（偏度、峰度）
- 常態性檢定結果（Shapiro-Wilk、Anderson-Darling）
- 百分位數與四分位數
- 信賴區間
- 異常值檢測與識別
- 資料品質評估
- 後續分析方法建議

### 一般用戶期望看到：
- 資料的基本特徵描述
- 中心趨勢的簡單解釋
- 變異程度的說明
- 異常值的識別與解釋
- 分佈特性的生活化描述
- 實用的數據洞察
- 改善建議

## 測試指令範例

```bash
# 基本資料分析
curl -X POST http://localhost:3000/tools/stat/analyze-data \
  -H "Content-Type: application/json" \
  -d '{
    "data": [28.5,31.2,29.8,33.1,30.7],
    "variable_name": "BMI指標"
  }'

# 含情境分析
curl -X POST http://localhost:3000/tools/stat/analyze-data \
  -H "Content-Type: application/json" \
  -d '{
    "data": [35000,38000,42000,36000,45000],
    "variable_name": "員工薪資",
    "context": {
      "scenario": "general",
      "analysis_purpose": "薪資結構分析"
    }
  }'
```

## 分析重點

### 中心趨勢指標：
- **平均數**: 對異常值敏感，適合常態分佈
- **中位數**: 對異常值穩健，適合偏態分佈
- **眾數**: 最常出現的值，適合類別資料

### 變異性指標：
- **標準差**: 與平均數同單位，易於解釋
- **變異係數**: 相對變異性，適合比較不同變數
- **四分位距**: 穩健的變異性指標

### 分佈形狀：
- **偏度**: 分佈不對稱程度
- **峰度**: 分佈尖銳程度
- **常態性**: 是否符合常態分佈

### 實務應用：
- 資料清理與品質檢查
- 探索性資料分析
- 統計方法選擇依據
- 報告撰寫基礎資訊
- 決策支援數據摘要

## AI 提問範例

### 範例 1: 數據分析新手求助
**用戶提問**: "我是研究生，剛開始做數據分析。我有一份 CSV 數據，包含學生的性別、學習方法、考試成績。我想知道學習方法是否會影響成績，但不知道該用什麼統計方法？"

**CSV 數據**:
```csv
學生ID,性別,學習方法,考試成績
001,男,傳統,75
002,女,線上,82
003,男,混合,78
004,女,傳統,71
005,男,線上,85
...
```

**AI 回應**: 這是很好的研究問題！我來幫您分析數據結構並建議適合的統計方法。首先讓我分析您的數據特徵，然後推薦最適合的統計檢定。

**工具調用**:
```json
{
  "tool": "analyze_data",
  "csvData": "學生ID,性別,學習方法,考試成績\n001,男,傳統,75\n002,女,線上,82\n003,男,混合,78\n004,女,傳統,71\n005,男,線上,85\n006,女,混合,88\n007,男,傳統,73\n008,女,線上,84\n009,男,混合,80\n010,女,傳統,69",
  "context": {
    "research_question": "學習方法是否會影響學生考試成績",
    "domain": "education"
  }
}
```

### 範例 2: 商業數據分析
**用戶提問**: "我是市場分析師，有一份客戶滿意度調查數據。包含客戶年齡、購買產品類型、滿意度評分。我想分析不同產品類型的滿意度是否有差異，應該怎麼做？"

**CSV 數據**:
```csv
客戶ID,年齡,產品類型,滿意度評分
C001,25,產品A,8.5
C002,34,產品B,7.2
C003,28,產品C,9.1
C004,45,產品A,7.8
C005,31,產品B,8.3
...
```

**AI 回應**: 您想分析不同產品類型的滿意度差異，這是很常見的商業分析需求。讓我分析您的數據結構，然後建議最適合的統計方法來回答您的研究問題。

**工具調用**:
```json
{
  "tool": "analyze_data",
  "csvData": "客戶ID,年齡,產品類型,滿意度評分\nC001,25,產品A,8.5\nC002,34,產品B,7.2\nC003,28,產品C,9.1\nC004,45,產品A,7.8\nC005,31,產品B,8.3\nC006,38,產品C,8.9\nC007,42,產品A,6.9\nC008,29,產品B,7.5\nC009,33,產品C,9.2\nC010,26,產品A,8.1",
  "context": {
    "research_question": "不同產品類型的客戶滿意度是否有顯著差異",
    "domain": "business"
  }
}
```