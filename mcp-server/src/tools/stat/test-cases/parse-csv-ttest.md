# CSV 智能統計分析工具測試案例

## 工具概述
CSV 智能統計分析工具能夠自動解析 CSV 數據，理解自然語言問題，智能判斷適當的統計檢定方法，並提供用戶友好的分析報告。特別適合非統計專業人員進行數據分析。

## 統計專業情境

### 情境 1: 臨床試驗治療前後比較（配對樣本）
**研究背景**: 分析新降血壓藥物的治療效果，比較患者用藥前後血壓變化
**研究設計**: 配對樣本 t 檢定，同一群患者的前後測量
**研究問題**: "新降血壓藥物對患者血壓的影響是否顯著？"

**測試數據**:
```json
{
  "csvData": "PatientID,血壓_治療前,血壓_治療後,Age,Gender\n1,145,132,45,M\n2,158,142,52,F\n3,162,148,38,M\n4,149,138,61,F\n5,153,141,47,M\n6,167,152,55,F\n7,144,135,42,M\n8,156,143,48,F\n9,160,149,59,M\n10,151,140,44,F\n11,165,154,51,M\n12,148,137,39,F\n13,159,147,56,M\n14,154,142,43,F\n15,161,150,50,M",
  "question": "新降血壓藥物對患者血壓的影響是否顯著？",
  "testType": "auto",
  "alpha": 0.05,
  "context": {
    "scenario": "medical",
    "variable_name": "收縮壓 (mmHg)",
    "analysis_purpose": "藥物療效評估",
    "expected_result": "期望治療後血壓顯著降低"
  }
}
```

### 情境 2: 教育方法效果比較（獨立樣本）
**研究背景**: 比較傳統教學法與翻轉教室教學法的學習效果
**研究設計**: 獨立樣本 t 檢定，兩組不同學生
**研究問題**: "翻轉教室教學法是否比傳統教學法更有效？"

**測試數據**:
```json
{
  "csvData": "StudentID,Teaching_Method,Final_Score,Study_Hours,Previous_GPA\n1,Traditional,78,25,3.2\n2,Traditional,82,28,3.4\n3,Traditional,75,22,3.1\n4,Traditional,85,30,3.6\n5,Traditional,79,26,3.3\n6,Traditional,81,29,3.5\n7,Traditional,77,24,3.0\n8,Traditional,83,31,3.7\n9,Flipped,88,32,3.4\n10,Flipped,92,35,3.8\n11,Flipped,85,30,3.5\n12,Flipped,94,38,3.9\n13,Flipped,89,33,3.6\n14,Flipped,91,36,3.7\n15,Flipped,87,31,3.3\n16,Flipped,93,37,4.0",
  "question": "翻轉教室教學法是否比傳統教學法更有效？",
  "testType": "auto",
  "alpha": 0.05,
  "alternative": "auto",
  "context": {
    "scenario": "education",
    "variable_name": "期末成績",
    "analysis_purpose": "教學方法效果比較",
    "expected_result": "期望翻轉教室效果更好"
  }
}
```

### 情境 3: 品質控制單樣本檢定
**研究背景**: 檢測生產線產品重量是否符合標準值 100g
**研究設計**: 單樣本 t 檢定，檢測樣本平均值是否等於目標值
**研究問題**: "產品重量是否符合 100g 的標準？"

**測試數據**:
```json
{
  "csvData": "ProductID,Weight,Production_Date,Line_Number\n1,99.8,2024-01-15,A\n2,100.2,2024-01-15,A\n3,99.5,2024-01-15,A\n4,100.7,2024-01-15,A\n5,99.9,2024-01-15,A\n6,100.1,2024-01-15,A\n7,99.6,2024-01-15,A\n8,100.4,2024-01-15,A\n9,99.7,2024-01-15,A\n10,100.3,2024-01-15,A\n11,99.8,2024-01-15,A\n12,100.0,2024-01-15,A\n13,99.9,2024-01-15,A\n14,100.2,2024-01-15,A\n15,99.7,2024-01-15,A",
  "question": "產品重量是否符合 100g 的標準？",
  "testType": "auto",
  "alpha": 0.05,
  "context": {
    "scenario": "quality",
    "variable_name": "產品重量 (g)",
    "analysis_purpose": "品質控制檢測",
    "target_value": 100,
    "specification_limit": "99.5-100.5g"
  }
}
```

## 一般用戶情境

### 情境 1: 員工績效改善分析
**生活情境**: 人資部門想分析績效改善計畫的效果
**數據**: 員工參與計畫前後的績效分數
**問題**: "績效改善計畫是否有效？"

**測試數據**:
```json
{
  "csvData": "EmployeeID,績效_改善前,績效_改善後,Department,Years_Experience\n1,75,82,Sales,3\n2,68,76,Sales,2\n3,71,79,Sales,4\n4,77,84,Marketing,5\n5,73,81,Marketing,3\n6,69,77,Marketing,2\n7,76,83,IT,6\n8,72,80,IT,4\n9,70,78,IT,3\n10,74,82,HR,5\n11,67,75,HR,2\n12,78,85,HR,7\n13,75,82,Finance,4\n14,71,79,Finance,3\n15,73,80,Finance,5",
  "question": "績效改善計畫是否有效？",
  "testType": "auto",
  "alpha": 0.05,
  "context": {
    "scenario": "general",
    "variable_name": "員工績效分數",
    "analysis_purpose": "評估改善計畫效果",
    "improvement_program": "3個月績效提升計畫"
  }
}
```

### 情境 2: 產品滿意度調查
**生活情境**: 公司想了解新產品是否比舊產品更受歡迎
**數據**: 用戶對新舊產品的滿意度評分
**問題**: "新產品的滿意度是否比舊產品高？"

**測試數據**:
```json
{
  "csvData": "CustomerID,舊產品_滿意度,新產品_滿意度,Age,Gender\n1,7.2,8.1,25,F\n2,6.8,7.9,32,M\n3,7.5,8.3,28,F\n4,6.9,7.8,35,M\n5,7.1,8.0,29,F\n6,6.7,7.7,31,M\n7,7.3,8.2,26,F\n8,7.0,7.9,33,M\n9,6.8,7.8,30,F\n10,7.4,8.4,27,M\n11,6.9,7.7,34,F\n12,7.2,8.1,28,M\n13,7.1,7.9,31,F\n14,6.8,7.8,29,M\n15,7.5,8.3,32,F",
  "question": "新產品的滿意度是否比舊產品高？",
  "testType": "auto",
  "alpha": 0.05,
  "alternative": "auto",
  "context": {
    "scenario": "general",
    "variable_name": "產品滿意度 (1-10)",
    "analysis_purpose": "產品改版效果評估",
    "expected_result": "期望新產品滿意度更高"
  }
}
```

### 情境 3: 咖啡店銷售分析
**生活情境**: 咖啡店老闆想知道假日與平日的銷售是否有差異
**數據**: 假日和平日的每日銷售額
**問題**: "假日銷售額是否比平日高？"

**測試數據**:
```json
{
  "csvData": "Date,Day_Type,Daily_Sales,Weather,Temperature\n2024-01-01,假日,25000,晴,18\n2024-01-02,平日,18000,陰,16\n2024-01-03,平日,19000,晴,17\n2024-01-04,平日,17500,雨,15\n2024-01-05,平日,18500,晴,19\n2024-01-06,假日,26000,晴,20\n2024-01-07,假日,24500,陰,18\n2024-01-08,平日,18000,晴,17\n2024-01-09,平日,19500,晴,18\n2024-01-10,平日,17000,雨,14\n2024-01-11,平日,18800,陰,16\n2024-01-12,平日,19200,晴,19\n2024-01-13,假日,27000,晴,21\n2024-01-14,假日,25500,晴,20\n2024-01-15,平日,18300,陰,17",
  "question": "假日銷售額是否比平日高？",
  "testType": "auto",
  "alpha": 0.05,
  "context": {
    "scenario": "general",
    "variable_name": "每日銷售額 (元)",
    "analysis_purpose": "營業模式分析",
    "business_insight": "制定假日促銷策略"
  }
}
```

## 特殊情境和邊界測試

### 情境 4: 複雜欄位名稱自動識別
**研究背景**: 測試工具對不同語言和複雜欄位名稱的識別能力
**特點**: 中英混合欄位名稱，測試智能識別功能

**測試數據**:
```json
{
  "csvData": "ID,Blood_Pressure_Before_Treatment,Blood_Pressure_After_Treatment,患者年齡,性別\n1,150,135,45,男\n2,162,148,52,女\n3,158,142,38,男\n4,165,150,61,女\n5,154,140,47,男\n6,168,155,55,女\n7,147,134,42,男\n8,161,146,48,女\n9,159,145,59,男\n10,152,139,44,女",
  "question": "治療是否能有效降低血壓？",
  "testType": "auto",
  "alpha": 0.05,
  "context": {
    "scenario": "medical",
    "variable_name": "血壓測量值",
    "analysis_purpose": "複雜欄位名稱識別測試",
    "note": "測試中英混合欄位名稱"
  }
}
```

### 情境 5: 小樣本數據分析
**研究背景**: 測試工具在小樣本情況下的表現
**特點**: 只有5個數據點，接近統計檢定的最小需求

**測試數據**:
```json
{
  "csvData": "SampleID,Measurement_Before,Measurement_After\n1,45.2,48.1\n2,42.8,46.3\n3,44.5,47.2\n4,43.1,45.9\n5,45.8,48.7",
  "question": "測量值是否有顯著改善？",
  "testType": "auto",
  "alpha": 0.05,
  "context": {
    "scenario": "test",
    "variable_name": "測量值",
    "analysis_purpose": "小樣本統計檢定",
    "sample_size": "最小樣本測試 (n=5)"
  }
}
```

### 情境 6: 缺失值處理測試
**研究背景**: 測試工具對缺失數據的處理能力
**特點**: 包含空值和無效數據

**測試數據**:
```json
{
  "csvData": "ID,Score_Pre,Score_Post,Notes\n1,75,82,完整數據\n2,68,,缺失後測\n3,,79,缺失前測\n4,71,NA,無效數據\n5,77,84,完整數據\n6,invalid,81,無效前測\n7,73,80,完整數據\n8,69,77,完整數據\n9,76,,缺失後測\n10,72,85,完整數據",
  "question": "分數是否有顯著提升？",
  "testType": "auto",
  "alpha": 0.05,
  "context": {
    "scenario": "test",
    "variable_name": "測試分數",
    "analysis_purpose": "缺失值處理測試",
    "data_quality": "包含多種缺失值類型"
  }
}
```

### 情境 7: 自然語言問題理解測試
**研究背景**: 測試工具對不同表達方式的理解能力
**特點**: 使用日常用語而非統計術語

**測試數據**:
```json
{
  "csvData": "學生編號,第一次考試,第二次考試,班級\n1,78,85,A班\n2,72,79,A班\n3,85,88,A班\n4,68,76,A班\n5,91,94,A班\n6,76,82,A班\n7,83,87,A班\n8,69,75,A班\n9,88,91,A班\n10,74,81,A班",
  "question": "學生第二次考試表現比第一次好嗎？成績有進步嗎？",
  "testType": "auto",
  "alpha": 0.05,
  "context": {
    "scenario": "education",
    "variable_name": "考試成績",
    "analysis_purpose": "自然語言理解測試",
    "language_style": "日常用語表達"
  }
}
```

## 預期結果

### 統計專業用戶期望看到：
- **AI 智能分析理解**: 檢測到的場景、統計方法選擇、使用的欄位
- **詳細統計結果**: t 統計量、自由度、p 值、信賴區間
- **效果量資訊**: Cohen's d 及其解釋
- **統計假設檢驗**: 原假設與對立假設的設定
- **方法學建議**: 統計方法選擇的合理性說明
- **數據品質評估**: 樣本大小、缺失值處理

### 一般用戶期望看到：
- **用戶問題理解**: AI 對研究問題的理解摘要
- **快速結論**: 清楚的是/否結論及實務意義
- **場景化解釋**: 根據具體場景的生活化解釋
- **實用建議**: 後續行動建議
- **數據摘要**: 簡單易懂的數據概覽
- **視覺化建議**: 適合的圖表類型推薦

## 測試指令範例

```bash
# 基本 CSV 分析
curl -X POST http://localhost:3000/tools/stat/parse-csv-ttest \
  -H "Content-Type: application/json" \
  -d '{
    "csvData": "ID,前測,後測\n1,75,82\n2,68,76\n3,71,79",
    "question": "訓練課程是否有效？"
  }'

# 指定統計方法
curl -X POST http://localhost:3000/tools/stat/parse-csv-ttest \
  -H "Content-Type: application/json" \
  -d '{
    "csvData": "學生,方法,成績\n1,A,85\n2,B,92",
    "question": "哪種方法效果更好？",
    "testType": "independent",
    "alpha": 0.01
  }'

# 複雜場景分析
curl -X POST http://localhost:3000/tools/stat/parse-csv-ttest \
  -H "Content-Type: application/json" \
  -d '{
    "csvData": "ProductID,Weight\n1,99.8\n2,100.2\n3,99.5",
    "question": "產品重量是否符合100g標準？",
    "testType": "one-sample",
    "alternative": "two-sided"
  }'
```

## 工具特色功能

### 智能場景識別：
- **醫療場景**: 自動識別治療前後、藥物效果等關鍵詞
- **教育場景**: 自動識別教學方法、學習成效等概念
- **品質控制**: 自動識別規格標準、製造品質等要素
- **一般分析**: 適用於各種商業和研究場景

### 自動統計方法選擇：
- **配對樣本**: 自動識別前後測、相關測量
- **獨立樣本**: 自動識別組別比較、不同群體
- **單樣本**: 自動識別標準值檢定、規格符合性

### 用戶友善特色：
- **自然語言理解**: 支援日常用語問題表達
- **場景化解釋**: 根據應用場景提供相關解釋
- **實務建議**: 提供後續行動的具體建議
- **智能容錯**: 自動處理缺失值和數據清理

### 彈性參數設定：
- **自動判斷**: 根據問題自動選擇統計參數
- **手動覆蓋**: 專業用戶可手動指定參數
- **多重驗證**: 提供多個顯著水準的結果比較