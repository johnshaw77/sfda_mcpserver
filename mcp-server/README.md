# MCP Server

ä¼æ¥­ç´š AI + MCP ç³»çµ±çš„æ ¸å¿ƒæœå‹™å™¨çµ„ä»¶ï¼Œå°ˆæ³¨æ–¼ HR æ¨¡çµ„èˆ‡å¯¦éš›è³‡æ–™åº« (org_employee è¡¨) ä¸²æ¥ã€‚

## ğŸ‰ å°ˆæ¡ˆç‹€æ…‹

**æ¶æ§‹é‡æ§‹å®Œæˆï¼**

- âœ… **ç§»é™¤æ‰€æœ‰é HR æ¨¡çµ„**ï¼ˆè²¡å‹™ã€ä»»å‹™ã€å®¢è¨´ï¼‰
- âœ… **ä¿ç•™ 3 å€‹ HR å·¥å…·**ï¼ˆæŸ¥è©¢å“¡å·¥ã€æœå°‹å“¡å·¥ã€ç²å–å“¡å·¥ç¸½æ•¸ï¼‰
- âœ… **ç›´æ¥èˆ‡å¯¦éš›è³‡æ–™åº«ä¸²æ¥**ï¼ˆorg_employee è¡¨ï¼‰
- âœ… **è‡ªè¨»å†Šæ¶æ§‹å¯¦æ–½å®Œæˆ**
- âœ… **API è·¯ç”±ä¸€è‡´åŒ–**

## ğŸš€ å·²å¯¦ç¾çš„ HR å·¥å…·

### HR å·¥å…· (3å€‹)

1. **get_employee** - æ ¹æ“šå“¡å·¥ç·¨è™ŸæŸ¥è©¢å“¡å·¥è©³ç´°è³‡è¨Š
2. **search_employees** - æ ¹æ“šå„ç¨®æ¢ä»¶æœå°‹å“¡å·¥ï¼ˆæ”¯æ´åˆ†é å’Œç¯©é¸ï¼‰
3. **get_employee_count** - ç²å–å“¡å·¥ç¸½æ•¸çµ±è¨ˆ

## ğŸ“Š è³‡æ–™åº«æ¬„ä½æ˜ å°„

`org_employee` è³‡æ–™è¡¨çš„æ¬„ä½æ˜ å°„å¦‚ä¸‹ï¼š

- **åŸºæœ¬è³‡æ–™** (basic)

  - name -> å§“å
  - employee_no -> å·¥è™Ÿ
  - sex -> æ€§åˆ¥
  - birthday -> ç”Ÿæ—¥
  - is_suspended -> æ˜¯å¦åœç”¨

- **è¯çµ¡æ–¹å¼** (contact)

  - email -> é›»å­éƒµä»¶
  - mobile -> æ‰‹æ©Ÿ
  - telphone -> å…¬å¸é›»è©±
  - ext_num -> å…¬å¸æ¡Œæ©Ÿ
  - address -> ä½å€

- **éƒ¨é–€è³‡è¨Š** (department)

  - group_name -> éƒ¨é–€åç¨±
  - group_code -> éƒ¨é–€ä»£ç¢¼

- **è·ä½è³‡è¨Š** (position)

  - title_name -> è·ä½åç¨±
  - user_type -> ç”¨æˆ¶é¡å‹

- **é›‡ç”¨è³‡è¨Š** (employment)
  - arrive_date -> åˆ°è·æ—¥æœŸ
  - leave_date -> é›¢è·æ—¥æœŸ
  - last_suspended_date -> åœç”¨æ™‚é–“
  - domain -> AD Domain
  - account -> AD å¸³è™Ÿ
  - lang -> èªç³»

è©³ç´°è³‡è¨Šè«‹åƒè€ƒï¼š[HR æ¨¡çµ„é·ç§»æ–‡ä»¶](../docs/hr-module-migration.md)

## å¿«é€Ÿé–‹å§‹

1. å®‰è£ä¾è³´ï¼š

   ```bash
   npm install
   ```

2. è¤‡è£½ç’°å¢ƒè®Šæ•¸ï¼š

   ```bash
   cp .env.example .env
   ```

3. å•Ÿå‹•é–‹ç™¼æœå‹™å™¨ï¼š

   ```bash
   npm run dev
   ```

4. æ¸¬è©¦å¥åº·æª¢æŸ¥ï¼š
   ```bash
   curl http://localhost:8080/health
   ```

## ğŸ§ª æ¸¬è©¦ HR å·¥å…·

### å¿«é€Ÿæ¸¬è©¦æ‰€æœ‰å·¥å…·ï¼š

```bash
# 1. æŸ¥è©¢å“¡å·¥è³‡è¨Š
curl -X POST "http://localhost:8080/api/hr/get_employee" \
  -H "Content-Type: application/json" \
  -d '{"employeeNo": "A123456"}'

# 2. æœå°‹å“¡å·¥
curl -X POST "http://localhost:8080/api/hr/search_employees" \
  -H "Content-Type: application/json" \
  -d '{"department": "ç ”ç™¼éƒ¨", "status": "active", "page": 1, "limit": 10}'

# 3. ç²å–å“¡å·¥çµ±è¨ˆ
curl -X POST "http://localhost:8080/api/hr/get_employee_count" \
  -H "Content-Type: application/json" \
  -d '{"status": "all"}'
```

## æ¨¡çµ„æ¶æ§‹

```
/src/tools/hr/
  â”œâ”€â”€ index.js           # å·¥å…·å®šç¾©å’Œè¨»å†Š
  â”œâ”€â”€ routes.js          # HR è·¯ç”±å®šç¾©
  â”œâ”€â”€ get-employee.js    # å“¡å·¥è©³ç´°è³‡è¨ŠæŸ¥è©¢å·¥å…·
  â”œâ”€â”€ search-employees.js # å“¡å·¥æœå°‹å·¥å…·
  â””â”€â”€ get-employee-count.js # å“¡å·¥æ•¸é‡çµ±è¨ˆå·¥å…·
```

## è³‡æ–™å®‰å…¨èˆ‡éš±ç§

HR å·¥å…·è™•ç†æ•æ„Ÿçš„å“¡å·¥è³‡è¨Šï¼Œå› æ­¤ï¼š

1. æ‰€æœ‰æŸ¥è©¢éƒ½æ·»åŠ äº† `name NOT LIKE '%test%'` æ¢ä»¶ä»¥æ’é™¤æ¸¬è©¦å¸³è™Ÿ
2. æ‰€æœ‰å·¥å…·è¨­ç½®äº† `cacheable: false`ï¼Œç¦æ­¢å¿«å–æ•æ„Ÿè³‡æ–™
3. æ—¥èªŒä¸­æ•æ„Ÿè³‡æ–™æœƒè¢«é®è”½ï¼Œä¸æœƒè¨˜éŒ„å®Œæ•´çš„å“¡å·¥è³‡è¨Š

## ç‰ˆæœ¬æ­·å²

- **v1.0.0** - åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å« HRã€è²¡å‹™ã€ä»»å‹™å’Œå®¢è¨´æ¨¡çµ„
- **v2.0.0** - æ¶æ§‹é‡æ§‹ï¼Œç§»é™¤é HR æ¨¡çµ„ï¼Œå°ˆæ³¨æ–¼ HR è³‡æ–™åº«ä¸²æ¥
